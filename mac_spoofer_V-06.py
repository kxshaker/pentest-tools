#!/usr/bin/env python
import subprocess
import optparse

def change_mac(interface, new_mac):
    # main function for Changing MAC address.
    print("[+] Putting down "+ interface)
    subprocess.run(["ifconfig", interface, "down"])
    print("[+] Changing MAC address...")
    subprocess.run(["ifconfig", interface, "hw", "ether", new_mac])
    print("[+] MAC Changed to "+ new_mac)
    print("[+] Bringing "+interface+" back UP")
    subprocess.run(["ifconfig", interface, "up"])
    print("[+] Process finished successfuly!")


def get_options():
    # Using the OptionParser method from the optparser object.
    parser = optparse.OptionParser()
    # Creating Options for the user for the interface and the new mac address with the add_option factory funtion.
    parser.add_option("-i","--interface",dest="interface",help="Interface to change it's MAC Address.")
    parser.add_option("-m","--MAC",dest="new_mac",help="New MAC Address.")
    (options, args) = parser.parse_args()
    # Error handeling
    if not options.interface:
        parser.error("[-] Please enter an interface !")
    elif not options.new_mac:
        parser.error("[-] Please enter a MAC address")
    # Parsing then returning user input commands.
    return options

options = get_options()
change_mac(options.interface, options.new_mac)
